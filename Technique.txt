1. DSU for adding and removing edges: offline -> an edge exists from query l to r -> save them to a segment tree -> dfs on the segment tree 

Ex: CF 1140F